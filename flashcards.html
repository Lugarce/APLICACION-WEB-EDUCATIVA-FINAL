<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Matienzo - Tarjetas de estudio</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <div class="layout">

    <!-- SIDEBAR UNIFICADO -->
    <aside class="sidebar">

      <div class="sidebar-header">
        <img src="logo.png" alt="Logo Matienzo" class="sidebar-logo">
        <div class="sidebar-title">Matienzo</div>
      </div>

      <nav class="nav-menu">
        <a href="index.html" class="nav-item">
          <svg viewBox="0 0 24 24" stroke="currentColor" fill="none">
            <path d="M3 12l9-9 9 9" />
            <path d="M9 21V9h6v12" />
          </svg>
          <span>Inicio</span>
        </a>

        <a href="buscar.html" class="nav-item">
          <svg viewBox="0 0 24 24" stroke="currentColor" fill="none">
            <circle cx="11" cy="11" r="7" />
            <line x1="16.65" y1="16.65" x2="21" y2="21" />
          </svg>
          <span>Buscar</span>
        </a>

        <a href="temas.html" class="nav-item">
          <svg viewBox="0 0 24 24" stroke="currentColor" fill="none">
            <rect x="3" y="4" width="18" height="6" rx="2"/>
            <rect x="3" y="14" width="18" height="6" rx="2"/>
          </svg>
          <span>Temas</span>
        </a>

        <a href="recursos.html" class="nav-item">
          <svg viewBox="0 0 24 24" stroke="currentColor" fill="none">
            <path d="M4 4h16v16H4z" />
            <path d="M4 15l5-5 4 4 3-3 4 4" />
          </svg>
          <span>Recursos</span>
        </a>

        <a href="autor.html" class="nav-item">
          <svg viewBox="0 0 24 24" stroke="currentColor" fill="none">
            <circle cx="12" cy="7" r="4" />
            <path d="M4 21c2-4 6-6 8-6s6 2 8 6" />
          </svg>
          <span>Autor</span>
        </a>

        <a href="flashcards.html" class="nav-item active">
          <svg viewBox="0 0 24 24" stroke="currentColor" fill="none">
            <rect x="3" y="5" width="18" height="14" rx="3" />
            <line x1="8" y1="9" x2="16" y2="9" />
          </svg>
          <span>Tarjetas</span>
        </a>

      </nav>

      <!-- CONFIGURACIÓN UNIFICADA AL FINAL -->
      <div class="configuracion">
        <div class="configuracion-box" id="modo-oscuro-box">
          <span>Modo Oscuro</span>
          <div class="toggle-btn" id="toggle-theme"></div>
        </div>
        <div class="configuracion-box" id="reset-datos">
          <span>Reset Datos</span>
        </div>
      </div>

    </aside>

    <!-- MAIN -->
    <main class="main">

      <h1>Tarjetas de Estudio</h1>
      <p style="color:var(--clr-text-muted); margin-bottom:22px;">
        Aquí se guardan las tarjetas generadas desde cada tema.
        Úsalas para repasar de forma rápida y visual.
      </p>

      <div id="flashcardsList" class="flashcards-grid"></div>

    </main>

  </div>

  <script src="app.js"></script>

  <script>
    (function () {
      const area = document.getElementById('flashcardsList');
      const raw = JSON.parse(localStorage.getItem('matienzo_flashcards') || '[]');
      
      // Procesar las flashcards guardadas
      const tarjetas = raw.map(item => {
        const parts = item.split("::");
        return { 
          temaId: parts[0] || "", 
          front: parts[1] || "",
          back: parts.slice(2).join("::") || item 
        };
      });

      if (tarjetas.length === 0) {
        area.innerHTML = `
          <div class="card">
            <h2>No tienes tarjetas aún</h2>
            <p>Ve a cualquier tema y presiona “Generar tarjetas”.</p>
          </div>
        `;
      } else {
        area.innerHTML = tarjetas.map(t => `
          <div class="flashcard">
            <div class="flashcard-inner">
              <div class="flashcard-face front">
                <div>${t.front || 'Tarjeta'}</div>
              </div>
              <div class="flashcard-face back">
                <div>${t.back || 'Contenido no disponible'}</div>
              </div>
            </div>
          </div>
        `).join("");

        // Añadir event listeners para el flip
        document.querySelectorAll('.flashcard').forEach(card => {
          card.addEventListener('click', function() {
            this.classList.toggle('flipped');
          });
        });
      }
    })();
  </script>

</body>
</html>